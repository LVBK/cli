"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.instantiateExtensionTemplate = instantiateExtensionTemplate;

var _extension = require("./extension");

var _template = require("./template");

var template = _interopRequireWildcard(_template);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

async function instantiateExtensionTemplate(localTemplatePath, context, opts) {
  if (!context.extJson && context.extensionPath) {
    context.extJson = await (0, _extension.loadExtensionJson)(context.extensionPath);
  }

  if (!context.extensionPath) {
    throw new Error(`Missing extension path for extension-template ${localTemplatePath}`);
  }

  await template.instantiateTemplatePath(localTemplatePath, context.extensionPath, context, opts);
  return await template.instantiateTemplatePath('extension-js', context.extensionPath, context, opts);
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9zZXJ2aWNlcy9leHRlbnNpb24tdGVtcGxhdGUuanMiXSwibmFtZXMiOlsiaW5zdGFudGlhdGVFeHRlbnNpb25UZW1wbGF0ZSIsInRlbXBsYXRlIiwibG9jYWxUZW1wbGF0ZVBhdGgiLCJjb250ZXh0Iiwib3B0cyIsImV4dEpzb24iLCJleHRlbnNpb25QYXRoIiwiRXJyb3IiLCJpbnN0YW50aWF0ZVRlbXBsYXRlUGF0aCJdLCJtYXBwaW5ncyI6Ijs7Ozs7UUFHc0JBLDRCLEdBQUFBLDRCOztBQUh0Qjs7QUFDQTs7SUFBWUMsUTs7OztBQUVMLGVBQWVELDRCQUFmLENBQTRDRSxpQkFBNUMsRUFBK0RDLE9BQS9ELEVBQXdFQyxJQUF4RSxFQUE4RTtBQUNuRixNQUFJLENBQUNELFFBQVFFLE9BQVQsSUFBb0JGLFFBQVFHLGFBQWhDLEVBQStDO0FBQzdDSCxZQUFRRSxPQUFSLEdBQWtCLE1BQU0sa0NBQWtCRixRQUFRRyxhQUExQixDQUF4QjtBQUNEOztBQUVELE1BQUksQ0FBQ0gsUUFBUUcsYUFBYixFQUE0QjtBQUMxQixVQUFNLElBQUlDLEtBQUosQ0FBVyxpREFBZ0RMLGlCQUFrQixFQUE3RSxDQUFOO0FBQ0Q7O0FBRUQsUUFBTUQsU0FBU08sdUJBQVQsQ0FBaUNOLGlCQUFqQyxFQUFvREMsUUFBUUcsYUFBNUQsRUFBMkVILE9BQTNFLEVBQW9GQyxJQUFwRixDQUFOO0FBQ0EsU0FBTyxNQUFNSCxTQUFTTyx1QkFBVCxDQUFpQyxjQUFqQyxFQUFpREwsUUFBUUcsYUFBekQsRUFBd0VILE9BQXhFLEVBQWlGQyxJQUFqRixDQUFiO0FBQ0QiLCJmaWxlIjoiZXh0ZW5zaW9uLXRlbXBsYXRlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtsb2FkRXh0ZW5zaW9uSnNvbn0gZnJvbSBcIi4vZXh0ZW5zaW9uXCI7XHJcbmltcG9ydCAqIGFzIHRlbXBsYXRlIGZyb20gXCIuL3RlbXBsYXRlXCI7XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gaW5zdGFudGlhdGVFeHRlbnNpb25UZW1wbGF0ZShsb2NhbFRlbXBsYXRlUGF0aCwgY29udGV4dCwgb3B0cykge1xyXG4gIGlmICghY29udGV4dC5leHRKc29uICYmIGNvbnRleHQuZXh0ZW5zaW9uUGF0aCkge1xyXG4gICAgY29udGV4dC5leHRKc29uID0gYXdhaXQgbG9hZEV4dGVuc2lvbkpzb24oY29udGV4dC5leHRlbnNpb25QYXRoKTtcclxuICB9XHJcblxyXG4gIGlmICghY29udGV4dC5leHRlbnNpb25QYXRoKSB7XHJcbiAgICB0aHJvdyBuZXcgRXJyb3IoYE1pc3NpbmcgZXh0ZW5zaW9uIHBhdGggZm9yIGV4dGVuc2lvbi10ZW1wbGF0ZSAke2xvY2FsVGVtcGxhdGVQYXRofWApO1xyXG4gIH1cclxuXHJcbiAgYXdhaXQgdGVtcGxhdGUuaW5zdGFudGlhdGVUZW1wbGF0ZVBhdGgobG9jYWxUZW1wbGF0ZVBhdGgsIGNvbnRleHQuZXh0ZW5zaW9uUGF0aCwgY29udGV4dCwgb3B0cyk7XHJcbiAgcmV0dXJuIGF3YWl0IHRlbXBsYXRlLmluc3RhbnRpYXRlVGVtcGxhdGVQYXRoKCdleHRlbnNpb24tanMnLCBjb250ZXh0LmV4dGVuc2lvblBhdGgsIGNvbnRleHQsIG9wdHMpO1xyXG59XHJcbiJdfQ==