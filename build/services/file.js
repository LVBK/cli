'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.readLinesInFile = readLinesInFile;
exports.listDirectoryContent = listDirectoryContent;

var _lodash = require('lodash');

var _lodash2 = _interopRequireDefault(_lodash);

var _fs = require('fs');

var _fs2 = _interopRequireDefault(_fs);

var _path = require('path');

var _path2 = _interopRequireDefault(_path);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function readLinesInFile(path) {
  if (!_fs2.default.existsSync(path)) {
    return [];
  }

  const fileContent = _fs2.default.readFileSync(path).toString('utf-8');
  const lines = fileContent.split(/[\r\n]+/).filter(line => !_lodash2.default.isEmpty(line));

  return lines;
}

function listDirectoryContent(dir, relative = false) {
  let filepaths = _fs2.default.readdirSync(dir).reduce((files, file) => {
    const name = _path2.default.join(dir, file);
    const isDirectory = _fs2.default.statSync(name).isDirectory();
    return isDirectory ? [...files, ...listDirectoryContent(name)] : [...files, name];
  }, []);

  if (relative) {
    // +1 because the directory names and with a slash which we don't want
    filepaths = filepaths.map(filepath => filepath.substring(dir.length + 1));
  }

  return filepaths;
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9zZXJ2aWNlcy9maWxlLmpzIl0sIm5hbWVzIjpbInJlYWRMaW5lc0luRmlsZSIsImxpc3REaXJlY3RvcnlDb250ZW50IiwicGF0aCIsImZzIiwiZXhpc3RzU3luYyIsImZpbGVDb250ZW50IiwicmVhZEZpbGVTeW5jIiwidG9TdHJpbmciLCJsaW5lcyIsInNwbGl0IiwiZmlsdGVyIiwibGluZSIsIl8iLCJpc0VtcHR5IiwiZGlyIiwicmVsYXRpdmUiLCJmaWxlcGF0aHMiLCJyZWFkZGlyU3luYyIsInJlZHVjZSIsImZpbGVzIiwiZmlsZSIsIm5hbWUiLCJqb2luIiwiaXNEaXJlY3RvcnkiLCJzdGF0U3luYyIsIm1hcCIsImZpbGVwYXRoIiwic3Vic3RyaW5nIiwibGVuZ3RoIl0sIm1hcHBpbmdzIjoiOzs7OztRQUlnQkEsZSxHQUFBQSxlO1FBV0FDLG9CLEdBQUFBLG9COztBQWZoQjs7OztBQUNBOzs7O0FBQ0E7Ozs7OztBQUVPLFNBQVNELGVBQVQsQ0FBeUJFLElBQXpCLEVBQStCO0FBQ3BDLE1BQUksQ0FBQ0MsYUFBR0MsVUFBSCxDQUFjRixJQUFkLENBQUwsRUFBMEI7QUFDeEIsV0FBTyxFQUFQO0FBQ0Q7O0FBRUQsUUFBTUcsY0FBY0YsYUFBR0csWUFBSCxDQUFnQkosSUFBaEIsRUFBc0JLLFFBQXRCLENBQStCLE9BQS9CLENBQXBCO0FBQ0EsUUFBTUMsUUFBUUgsWUFBWUksS0FBWixDQUFrQixTQUFsQixFQUE2QkMsTUFBN0IsQ0FBb0NDLFFBQVEsQ0FBQ0MsaUJBQUVDLE9BQUYsQ0FBVUYsSUFBVixDQUE3QyxDQUFkOztBQUVBLFNBQU9ILEtBQVA7QUFDRDs7QUFFTSxTQUFTUCxvQkFBVCxDQUE4QmEsR0FBOUIsRUFBbUNDLFdBQVcsS0FBOUMsRUFBcUQ7QUFDMUQsTUFBSUMsWUFBWWIsYUFBR2MsV0FBSCxDQUFlSCxHQUFmLEVBQ2JJLE1BRGEsQ0FDTixDQUFDQyxLQUFELEVBQVFDLElBQVIsS0FBaUI7QUFDdkIsVUFBTUMsT0FBT25CLGVBQUtvQixJQUFMLENBQVVSLEdBQVYsRUFBZU0sSUFBZixDQUFiO0FBQ0EsVUFBTUcsY0FBY3BCLGFBQUdxQixRQUFILENBQVlILElBQVosRUFBa0JFLFdBQWxCLEVBQXBCO0FBQ0EsV0FBT0EsY0FBYyxDQUFDLEdBQUdKLEtBQUosRUFBVyxHQUFHbEIscUJBQXFCb0IsSUFBckIsQ0FBZCxDQUFkLEdBQTBELENBQUMsR0FBR0YsS0FBSixFQUFXRSxJQUFYLENBQWpFO0FBQ0QsR0FMYSxFQUtYLEVBTFcsQ0FBaEI7O0FBT0EsTUFBSU4sUUFBSixFQUFjO0FBQ1o7QUFDQUMsZ0JBQVlBLFVBQVVTLEdBQVYsQ0FBY0MsWUFBWUEsU0FBU0MsU0FBVCxDQUFtQmIsSUFBSWMsTUFBSixHQUFhLENBQWhDLENBQTFCLENBQVo7QUFDRDs7QUFFRCxTQUFPWixTQUFQO0FBQ0QiLCJmaWxlIjoiZmlsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBfIGZyb20gJ2xvZGFzaCc7XHJcbmltcG9ydCBmcyBmcm9tICdmcyc7XHJcbmltcG9ydCBwYXRoIGZyb20gJ3BhdGgnO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHJlYWRMaW5lc0luRmlsZShwYXRoKSB7XHJcbiAgaWYgKCFmcy5leGlzdHNTeW5jKHBhdGgpKSB7XHJcbiAgICByZXR1cm4gW107XHJcbiAgfVxyXG5cclxuICBjb25zdCBmaWxlQ29udGVudCA9IGZzLnJlYWRGaWxlU3luYyhwYXRoKS50b1N0cmluZygndXRmLTgnKTtcclxuICBjb25zdCBsaW5lcyA9IGZpbGVDb250ZW50LnNwbGl0KC9bXFxyXFxuXSsvKS5maWx0ZXIobGluZSA9PiAhXy5pc0VtcHR5KGxpbmUpKTtcclxuXHJcbiAgcmV0dXJuIGxpbmVzO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gbGlzdERpcmVjdG9yeUNvbnRlbnQoZGlyLCByZWxhdGl2ZSA9IGZhbHNlKSB7XHJcbiAgbGV0IGZpbGVwYXRocyA9IGZzLnJlYWRkaXJTeW5jKGRpcilcclxuICAgIC5yZWR1Y2UoKGZpbGVzLCBmaWxlKSA9PiB7XHJcbiAgICAgIGNvbnN0IG5hbWUgPSBwYXRoLmpvaW4oZGlyLCBmaWxlKTtcclxuICAgICAgY29uc3QgaXNEaXJlY3RvcnkgPSBmcy5zdGF0U3luYyhuYW1lKS5pc0RpcmVjdG9yeSgpO1xyXG4gICAgICByZXR1cm4gaXNEaXJlY3RvcnkgPyBbLi4uZmlsZXMsIC4uLmxpc3REaXJlY3RvcnlDb250ZW50KG5hbWUpXSA6IFsuLi5maWxlcywgbmFtZV07XHJcbiAgICB9LCBbXSk7XHJcblxyXG4gIGlmIChyZWxhdGl2ZSkge1xyXG4gICAgLy8gKzEgYmVjYXVzZSB0aGUgZGlyZWN0b3J5IG5hbWVzIGFuZCB3aXRoIGEgc2xhc2ggd2hpY2ggd2UgZG9uJ3Qgd2FudFxyXG4gICAgZmlsZXBhdGhzID0gZmlsZXBhdGhzLm1hcChmaWxlcGF0aCA9PiBmaWxlcGF0aC5zdWJzdHJpbmcoZGlyLmxlbmd0aCArIDEpKTtcclxuICB9XHJcblxyXG4gIHJldHVybiBmaWxlcGF0aHM7XHJcbn1cclxuIl19